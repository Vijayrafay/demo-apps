apiVersion: eaas.envmgmt.io/v1
kind: ResourceTemplate
metadata:
  createdBy:
    id: 7w2lnkp
    username: onprem@rafay.co
  modifiedBy:
    id: 7w2lnkp
    username: onprem@rafay.co
  name: rautort1-991758
  project: defaultproject
spec:
  agents:
  - name: dockeronprem
  contexts:
  - name: rauto-ec2-config-config-context-991758
  - name: rauto-aws-config-config-context-991758
  - name: rauto-infra-config-config-context-991758
  hooks:
    provider:
      terraform:
        deploy:
          apply: {}
          init: {}
          output: {}
          plan:
            before:
            - name: container
              onFailure: continue
              options:
                container:
                  envvars:
                    DOWNLOAD_TOKEN: $(resource."rautort1-991758".artifact.workdir.token)$
                    DOWNLOAD_URL: $(resource."rautort1-991758".artifact.workdir.url)$
                  image: eaasunittest/infracost:v2
                  successCondition: 'if #status.container.exitCode == 0   {    success:
                    true  } '
                  workingDirPath: /infracost/
              timeoutSeconds: 500
              type: container
        destroy:
          destroy: {}
          init: {}
          plan:
            before:
            - name: destroyhookhttp
              onFailure: continue
              options:
                http:
                  endpoint: https://httpstat.us/200
                  headers:
                    Accept-Language: en-US,en;q=0.9,nl;q=0.8,fr;q=0.7
                    test1: value1
                    test2: value2
                  method: GET
                  successCondition: "if #status.http.statusCode == 200 { \t\t\t\t\t\t\tsuccess:
                    true \t\t\t\t\t\t}"
              timeoutSeconds: 500
              type: http
  provider: terraform
  providerOptions:
    terraform:
      backendConfigs:
      - tmp/inputs/one.tfvars
      backendType: custom
      lock: false
  repositoryOptions:
    branch: master
    directoryPath: workloads/eaas/terraform-guides/infrastructure-as-code/aws-ec2-instance/
    name: rauto-repo-991758
  version: version1-991758
  versionState: active
